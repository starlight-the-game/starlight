{"version":3,"file":"static/js/639.59826af1.chunk.js","mappings":"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","sources":["EventPage.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport axios from 'axios';\r\nimport './Main_Menu_Style.css';\r\nimport { Link, useLocation } from 'react-router-dom';\r\nimport logoIcon from './assets/Starlight-logo.png'; // Logo image\r\nimport leaveIcon from './assets/Header_Items/Leave-icon.png'; // Leave icon\r\nimport songsIcon from './assets/Header_Items/songs-icon.png'; // Songs icon\r\nimport historyIcon from './assets/Header_Items/history-icon.png'; // History icon\r\nimport eventsIcon from './assets/Header_Items/events-icon.png'; // Events icon\r\nimport storeIcon from './assets/Header_Items/store-icon.png'; // Store icon\r\nimport bgSidebarImage from './assets/Collapsed_Sidebar/sidebar-bg.png'; // Sidebar background\r\nimport songSidebarIcon from './assets/Collapsed_Sidebar/Song-sidebar-icon.png'; // Song icon for sidebar\r\nimport Fuse from 'fuse.js';\r\nimport { FaSearch } from 'react-icons/fa';\r\n\r\nconst rootUrl = \"https://cluster1.swyrin.id.vn\";\r\n// const rootUrl = \"https://localhost:7224\";\r\n\r\nfunction EventPage() {\r\n  const location = useLocation();\r\n  const currentSongFromLocation = location.state?.currentSong || null;\r\n  const currentSongIndexFromLocation = location.state?.currentSongIndex || 0;\r\n  const [currentSong, setCurrentSong] = useState(currentSongFromLocation);\r\n  const [currentSongIndex, setCurrentSongIndex] = useState(currentSongIndexFromLocation);\r\n  let audio; // Define audio variable\r\n  const [isSongListOpen, setIsSongListOpen] = useState(false);\r\n  const [showPopup, setShowPopup] = useState(false);\r\n  const [songs, setSongs] = useState([]);\r\n  const [searchQuery, setSearchQuery] = useState('');\r\n  const fuse = new Fuse(songs, { keys: ['title'], threshold: 0.3 });\r\n  const filteredSongs = searchQuery ? fuse.search(searchQuery).map(result => result.item) : songs;\r\n\r\n  //const navigate = useNavigate();\r\n\r\n  useEffect(() => {\r\n    setCurrentSong(currentSongFromLocation);\r\n    setCurrentSongIndex(currentSongIndexFromLocation);\r\n  }, [currentSongFromLocation, currentSongIndexFromLocation]);\r\n\r\n  useEffect(() => {\r\n    setCurrentSong(currentSongFromLocation);\r\n  }, [currentSongFromLocation]);\r\n\r\n  useEffect(() => {\r\n    const fetchData = async () => {\r\n      try {\r\n        // Fetch all songs data\r\n        const songsResponse = await axios.get(`${rootUrl}/api/track/all`, {\r\n          headers: {\r\n            'Content-Type': 'application/json'\r\n          }\r\n        });\r\n        const fetchedSongs = songsResponse.data;\r\n        setSongs(fetchedSongs);\r\n        if (fetchedSongs.length > 0) {\r\n          setCurrentSongIndex(0);\r\n        }\r\n      } catch (error) {\r\n        console.error('Error fetching data:', error);\r\n      }\r\n    };\r\n\r\n    fetchData();\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    if (currentSongIndex >= songs.length) {\r\n      setCurrentSongIndex(0);\r\n    }\r\n  }, [currentSongIndex, songs.length]);\r\n\r\n  useEffect(() => {\r\n    const handleKeyDown = (event) => {\r\n      if (event.keyCode === 27) { // Esc key\r\n        event.preventDefault(); // Prevent exiting fullscreen\r\n        handleLeaveClick();\r\n      }\r\n    };\r\n\r\n    window.addEventListener('keydown', handleKeyDown);\r\n    return () => {\r\n      window.removeEventListener('keydown', handleKeyDown);\r\n    };\r\n  }, []);\r\n\r\n  const toggleSongList = () => {\r\n    setIsSongListOpen(!isSongListOpen);\r\n  };\r\n\r\n  const handleLeaveClick = () => {\r\n    setShowPopup(true);\r\n  };\r\n\r\n  const handleConfirmLeave = () => {\r\n    if (audio) {\r\n      audio.pause();\r\n      audio = null;\r\n    }\r\n    window.location.href = '/';\r\n  };\r\n\r\n  const handleCancelLeave = () => {\r\n    setShowPopup(false);\r\n  };\r\n\r\n  const handleSearchChange = (event) => {\r\n    setSearchQuery(event.target.value);\r\n  };\r\n\r\n  const handleSearchSubmit = (event) => {\r\n    event.preventDefault();\r\n  };\r\n\r\n  return (\r\n    <div className=\"eventpage\">\r\n      {/* Header Navigation Bar */}\r\n      <header className=\"navbar\">\r\n        <div id=\"nav-icon1\" className={isSongListOpen ? 'open' : ''} onClick={toggleSongList}>\r\n          <span></span>\r\n          <span></span>\r\n          <span></span>\r\n        </div>\r\n\r\n        <nav className=\"nav-links left\">\r\n          <Link to=\"/songpage\">\r\n            <img src={songsIcon} alt=\"Songs\" className=\"nav-icon\" />\r\n            <span>Songs</span>\r\n          </Link>\r\n          <Link to=\"/historypage\">\r\n            <img src={historyIcon} alt=\"History\" className=\"nav-icon\" />\r\n            <span>History</span>\r\n          </Link>\r\n        </nav>\r\n\r\n        {/* Center Curved Logo */}\r\n        <div className=\"logo-container\">\r\n          <Link to=\"/songpage\" className=\"logo\">\r\n            <span className=\"star-light\">\r\n              <span>STAR</span>\r\n              <img src={logoIcon} alt=\"Logo\" className=\"logo-icon\" style={{ verticalAlign: 'middle' }} />\r\n              <span className=\"light\">LIGHT</span>\r\n            </span>\r\n          </Link>\r\n        </div>\r\n\r\n        <nav className=\"nav-links right\">\r\n          <Link to=\"/eventpage\" state={{ currentSong: currentSong, currentSongIndex: currentSongIndex }}>\r\n            <img src={eventsIcon} alt=\"Events\" className=\"nav-icon\" />\r\n            <span>Events</span>\r\n          </Link>\r\n          <Link to=\"/storepage\" state={{ currentSong: currentSong, currentSongIndex: currentSongIndex }}>\r\n            <img src={storeIcon} alt=\"Store\" className=\"nav-icon\" />\r\n            <span>Store</span>\r\n          </Link>\r\n        </nav>\r\n\r\n        <div className=\"leave-button\">\r\n          <img src={leaveIcon} alt=\"Leave\" className=\"leave-icon\" style={{ width: '26px', height: '26px' }} onClick={handleLeaveClick} />\r\n        </div>\r\n      </header>\r\n\r\n      {/* Current Page Content */}\r\n      <div className=\"content-layer\">\r\n        {/* Background Image */}\r\n        <div className=\"background-image\">\r\n          <img src={currentSong && currentSong.backgroundUrl ? `${currentSong.backgroundUrl}` : ''} alt=\"Background\" />\r\n        </div>\r\n\r\n        {/* Overlay Layer */}\r\n        <div className=\"overlay-layer\" style={{ height: '1000px' }}></div>\r\n\r\n        {/* Coming Soon Text */}\r\n        <div className=\"coming-soon-text\">\r\n          Coming soon...\r\n        </div>\r\n      </div>\r\n\r\n      {/* Song List Sidebar */}\r\n      <div className={`sidebar ${isSongListOpen ? 'open' : ''}`} style={{ backgroundImage: `url(${bgSidebarImage})` }}>\r\n        <div className=\"search-bar-container\">\r\n          <form className=\"search-form\" onSubmit={handleSearchSubmit}>\r\n            <label htmlFor=\"search\" className=\"screen-reader-text\">Search</label>\r\n            <input\r\n              type=\"search\"\r\n              id=\"search\"\r\n              placeholder=\"Search songs...\"\r\n              value={searchQuery}\r\n              onChange={handleSearchChange}\r\n              className=\"search-field\"\r\n            />\r\n            <button type=\"submit\" className=\"search-submit\">\r\n              <FaSearch className=\"search-bar-icon\" />\r\n            </button>\r\n          </form>\r\n        </div>\r\n        <ul>\r\n          {filteredSongs.map((song, index) => (\r\n            <li key={index} className=\"song-item\" onClick={() => setCurrentSong(song)}>\r\n              <div className=\"song-info-sidebar\">\r\n                <img src={songSidebarIcon} alt=\"Song Sidebar Icon\" className=\"song-sidebar-icon\" />\r\n                <span className=\"sidebar-song\">\r\n                  {song.title}\r\n                </span>\r\n              </div>\r\n              <div className=\"song-bg\" style={{ backgroundImage: `url(${rootUrl}${song.backgroundFileLocation})` }}></div>\r\n              <span className=\"sidebar-song-title\">\r\n                {song.title}\r\n              </span>\r\n            </li>\r\n          ))}\r\n        </ul>\r\n      </div>\r\n\r\n      {showPopup && (\r\n        <div className=\"popup-overlay\">\r\n          <div className=\"popup-content\">\r\n            <h2>Confirm Leave</h2>\r\n            <p>Are you sure you want to leave the game?</p>\r\n            <button className=\"stay-button\" onClick={handleCancelLeave}>Stay</button>\r\n            <button className=\"leave-button\" onClick={handleConfirmLeave}>Leave</button>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default EventPage;\r\n"],"names":["rootUrl","_location$state","_location$state2","location","useLocation","currentSongFromLocation","state","currentSong","currentSongIndexFromLocation","currentSongIndex","setCurrentSong","useState","setCurrentSongIndex","audio","isSongListOpen","setIsSongListOpen","showPopup","setShowPopup","songs","setSongs","searchQuery","setSearchQuery","fuse","Fuse","keys","threshold","filteredSongs","search","map","result","item","useEffect","async","fetchedSongs","axios","get","headers","data","length","error","console","fetchData","handleKeyDown","event","keyCode","preventDefault","handleLeaveClick","window","addEventListener","removeEventListener","_jsxs","className","children","id","onClick","toggleSongList","_jsx","Link","to","src","songsIcon","alt","historyIcon","logoIcon","style","verticalAlign","eventsIcon","storeIcon","leaveIcon","width","height","backgroundUrl","backgroundImage","bgSidebarImage","onSubmit","htmlFor","type","placeholder","value","onChange","target","FaSearch","song","index","songSidebarIcon","title","backgroundFileLocation","handleCancelLeave","handleConfirmLeave","pause","href"],"sourceRoot":""}