"use strict";(self.webpackChunkstarlight=self.webpackChunkstarlight||[]).push([[8096],{8096:(t,e,s)=>{s.r(e),s.d(e,{default:()=>u});var i=s(1289),o=s.n(i),a=s(5043),A=s(3216);o().GameObjects.Image;class n extends o().Scene{constructor(){super("MainScene"),this.notes=void 0,this.noteSpeed=100,this.noteScale=15,this.timingLine=void 0,this.gameData=void 0,this.notePositionBase=680,this.notePositionGaps=184,this.noteOuter1PositionX=this.notePositionBase,this.noteInner1PositionX=this.notePositionBase+this.notePositionGaps,this.noteInner2PositionX=this.notePositionBase+2*this.notePositionGaps,this.noteOuter2PositionX=this.notePositionBase+3*this.notePositionGaps,this.scoreText=void 0,this.comboText=void 0,this.accuracyText=void 0,this.combo=void 0,this.score=void 0}init(t){this.combo=0,this.score=0,this.gameData=t.gameData,this.input.keyboard.on("keydown",this.handleInput,this),this.notes=this.physics.add.group(),this.timingLine=this.add.rectangle(276+this.noteOuter1PositionX,845,650,10,16711680,.5)}preload(){this.add.image(0,0,"background").setOrigin(0,0);this.add.rectangle(0,0,1920,1080,0,.7).setOrigin(0,0),this.add.image(this.noteOuter1PositionX,845,"noteRing"),this.add.image(this.noteInner1PositionX,845,"noteRing"),this.add.image(this.noteInner2PositionX,845,"noteRing"),this.add.image(this.noteOuter2PositionX,845,"noteRing"),this.scoreText=this.add.text(1410,100,"0000000",{fontFamily:"sans-serif",color:"#ffffff",fontSize:"80px"}).setOrigin(0,0),this.comboText=this.add.text(200,900,"100x",{fontFamily:"sans-serif",color:"#ffffff",fontSize:"60px"}).setOrigin(0,0),this.accuracyText=this.add.text(1480,180,"100.00%",{fontFamily:"sans-serif",color:"#ffffff",fontSize:"60px"}).setOrigin(0,0);this.gameData.notes.forEach((t=>{const e=845/(this.noteSpeed*this.noteScale)*1e3,s=Math.max(0,t.time-e);this.time.delayedCall(s,(()=>{this.spawnNote(t.position)}))}))}create(){this.sound.add("music").play()}spawnNote(t){const e=[-1,this.noteOuter1PositionX,this.noteInner1PositionX,this.noteInner2PositionX,this.noteOuter2PositionX],s=this.add.image(e[t],0,"noteOuter");this.notes.add(s),this.notes.setVelocityY(this.noteSpeed*this.noteScale)}handleInput(t){this.notes.getChildren().forEach((t=>{const e=t.y;Math.abs(e-845)<100&&(t.destroy(),++this.combo,this.score+=300)}))}handleGameOver(){window.location.href="/historypage"}update(){this.comboText.setText(`${this.combo}x`),this.scoreText.setText(`${this.score}`.padStart(7,"0")),this.isGameOver()&&this.handleGameOver()}isGameOver(){return!1}}const h=n;class d extends o().Scene{constructor(){super("DataLoader"),this.mapId=2211127}init(t){this.mapId=t.songId}preload(){const t=`https://cluster1.swyrin.id.vn/static/${this.mapId}/${this.mapId}.json`;this.load.json("gameData",t)}create(){this.scene.switch("AssetLoader",{mapId:this.mapId})}}const r=d;class c extends o().Scene{constructor(){super("AssetLoader"),this.mapId=void 0,this.gameData=void 0}init(t){this.mapId=t.mapId}preload(){this.gameData=this.cache.json.get("gameData");const t=this.gameData.metadata.audio_file,e=this.gameData.metadata.background_file,i=`https://cluster1.swyrin.id.vn/static/${this.mapId}/${e}`,o=`https://cluster1.swyrin.id.vn/static/${this.mapId}/${t}`;this.load.image("noteOuter",s(4510)),this.load.image("noteRing",s(3839)),this.load.image("background",i),this.load.audio("music",o)}create(){this.scene.switch("MainScene",{gameData:this.gameData})}}const g=c;var m=s(579);const u=function(){const t=(0,a.useRef)(null),{songId:e}=(0,A.g)();return(0,a.useEffect)((()=>{const s={type:o().AUTO,parent:t.current,width:1920,height:1080,scene:[r,g,h],powerPreference:"high-performance",fps:{smoothStep:!0,target:120,forceSetTimeOut:!0},physics:{default:"arcade",arcade:{debug:!1}}},i=new(o().Game)(s);return i.scene.start("DataLoader",{songId:e}),()=>{i.destroy(!0)}}),[e]),(0,m.jsx)("div",{ref:t,style:{display:"flex",justifyContent:"center",alignItems:"center",height:"100vh"}})}},3839:t=>{t.exports="data:image/png;base64,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"},4510:t=>{t.exports="data:image/png;base64,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"}}]);
//# sourceMappingURL=8096.d443cde1.chunk.js.map